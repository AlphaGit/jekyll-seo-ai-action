import os
import openai
from dotenv import load_dotenv

environment = os.getenv("ENVIRONMENT", "dev")

load_dotenv(f"{environment}.env")

openai.api_key = os.getenv("OPENAI_API_KEY", "fake-api-key")
prompt_instruction = os.getenv("PROMPT_INSTRUCTION")
blog_post_contents = "---\n\ntitle: Cómo uso Trello para trabajar\ndate: '2012-01-20 18:31:00 +0000'\ndate_gmt: '2012-01-20 23:31:00 +0000'\ncategories:\n- Miscelaneous\n- Projects\ntags:\n- organización\n- preguntas\n- Trello\n- \"ítems\"\n- tareas\n- tarjetas\n- listas\n- pizarras\n- respuestas\nsubtitle: Mi guía novata a la organización\n---\n\nHace un tiempo ya, y realmente, el día que salió, yo ya tenía una cuenta de [Trello](http://trello.com). Era simple, era bonito, era rápido, pero no veía el gran poder que tenía. Es porque, como muchas cosas, hay que saber utilizarlas.\n\nHoy es para mi una herramienta fundamental en mi organización (personal y laboral) y me ha vuelto más productivo y ha evitado muchos de esos momentos de \"_ ¿y ahora qué?_\" o \"_ ¿en qué estaba?_\". Voy a compartirles el como para que sepan cómo lo hago yo, y espero comentarios de cómo lo hacen ustedes. Hasta que arregle los comentarios del blog, pueden responderme a [@AlphaTwi](http://twitter.com/AlphaTwi).\n\n<!--more-->\n\n## Trello por default\n\nTrello se compone de _boards_ (pizarras) que a su vez se componen _lists_ (listas), que a su vez contienen _cards_ (tarjetas).\n\nCuando crean un board por primera vez, verán esto como su contenido.\n\n![Trello default lists]({{ site.baseurl }}/assets/trelloDefault.png)\n\n(Puede que se vea distinto si su resolución de pantalla es menor, en ese caso pasará al modo mobile.)\n\nEl flujo ya es bastante apropiado en la forma en la que se presenta, y es ideal para grandes grupos de gente (ah, es multiusuario). Básicamente, las cosas se van dando de alta en la lista _To Do_, al momento en que comienzan a trabajarse, se mueven a _Doing_, y al momento de terminarlas se pasan a _Done_.\n\n### Preguntas respondidas\n\nLa simple disposición de tareas de esta forma ayuda a responder muchas preguntas.\n\nCuando las cosas están en To Do es porque es importante ver cuáles son todas las cosas pendientes. Responde preguntas como \"_terminaremos para hoy/mañana?_\" o \"_cuando termines con esto estás libre?_\".\n\nLa lista de Doing ayuda a ver qué progreso se está haciendo. Responde preguntas como \"_En qué está trabajando José?_\" o \"_Qué estaba haciendo yo?_\" (especialmente útil para los que lidian mucho con interrupciones).\n\nLa lista de Done ayuda a ver qué se terminó.  ¿Qué sentido tiene esa lista? Ayuda a responder preguntas como \"_ ¿Qué porcentaje de tareas terminamos?_\", \"_ ¿Avanzamos mucho?_\", \"_ ¿Qué está presente en esta versión?_\".\n\n## Mi variante: el día a día\n\nMis cambios a ese esquema por default no han sido radicalmente distintos, pero lo suficiente como para mencionar. Este es el caso de mi trabajo, tengo distintos esquemas para distintos tipos de proyectos personales (y creo que esa es una de las cosas que hace a esta herramienta tán versátil). Estas son mis listas y para qué se usan:\n\n**To Do:** Igual que siempre este es el listado de todo lo que se tiene que hacer, o que algún día tiene que ser resuelto. Puede ser mañana, puede ser la semana entrante, puede ser \"algún día\" indefinido.\n\n**Get Done Today:** Al principio del día, luego de checkear mis correos y verificar qué cosas tengo pendientes que no sabía antes, elijo desde **To Do** un listado de ítems que obligatoriamente tengo que terminar el día de hoy. Puede basarse en prioridad, en tiempo disponible, en urgencias, en la dirección del viento. La forma de elegirlas no importa, lo que importa es que esas tareas son mi compromiso del día. Me sirve también para reportar en nuestra scrum meeting qué es lo que voy a estar haciendo.\n\n**Doing right now:** Como su nombre lo dice, el listado de cosas que estoy haciendo ahora mismo. Si no tengo nada acá, probablemente esté almorzando. Si tengo más de tres tarjetas aquí, seguramente algo saldrá mal. Cuando me llaman por teléfono, me buscan en la oficina o me interrumpe un email, este es el lugar al que vuelvo a mirar y resumo mis tareas.\n\n**Waiting for feedback:** Este es el listado de cosas que comencé pero estoy bloqueado y requiero que alguien más intervenga. Es porque la tarea depende de alguien más o porque estoy esperando respuesta de alguien para poder continuar. Siempre les agrego un comentario a esas tarjetas para poder leer cuál fue la última vez que la actualicé y para saber qué estoy esperando que me respondan o hagan. Puede que una vez que me respondan las tarjetas se muevan de aquí a **To Do**, o, si tengo suerte, a **Done**.\n\n**Done**: Nuevamente, aquí es donde vienen a morir las cosas que ya hice. Mantengo este listado hasta el fin del día, en donde lleno mis timesheets (mi empresa requiere que llene un listado de qué actividades realicé cada día). Las tarjetas me ayudan a recordar, y el tener que limpiar esa lista me hace recordar llenar el timesheet.\n\nEste es un ejemplo con mi día de hoy (exitosamente cerrando la semana):\n\n![My Work Today in Trello]({{ site.baseurl }}/assets/MyWork.png)\n\nProbablemente lean mis ítems y no entiendan en qué estoy trabajando, porque los títulos no son muy explicativos. Ese es otro beneficio: no tienen que serlo. Sólo tienen que decir lo suficiente como para que yo recuerde de qué se trataba todo. Si necesito más detalles uso los comentarios o las descripciones de las tarjetas (que, dicho sea de paso, soporta [Markdown](http://en.wikipedia.org/wiki/Markdown)). Si necesito varios puntos intermedios agrego una checklist (como el primer item en la imagen), y es todo a gusto.\n\nEspero que esto haya sido útil para quién lo lea. Si tienen sugerencias, estoy encantado de oírlas, sería muy útil para mi también aprender de alguien que sepa organizarse mejor.\n\n_Soy un zorrinito organizado._"
full_prompt = f"{prompt_instruction}\n\n{blog_post_contents}\n\n"

response = openai.Completion.create(
  model="text-davinci-003",
  prompt=full_prompt,
  temperature=0.7,
  max_tokens=256
)

print(response.choices[0].text)
